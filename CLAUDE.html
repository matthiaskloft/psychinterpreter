<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>CLAUDE.md • psychinterpreter</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="CLAUDE.md"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">psychinterpreter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/matthiaskloft/psychinterpreter/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>CLAUDE.md</h1>
      <small class="dont-index">Source: <a href="https://github.com/matthiaskloft/psychinterpreter/blob/HEAD/CLAUDE.md"><code>CLAUDE.md</code></a></small>
    </div>


<div id="claudemd" class="section level1">

<p><strong>Purpose</strong>: Quick reference for Claude Code when helping users with the <strong>psychinterpreter</strong> R package.</p>
<p><strong>For technical/architectural details</strong>: See <a href="dev/DEVELOPER_GUIDE.html">dev/DEVELOPER_GUIDE.md</a></p>
<p><strong>Status</strong>: Phase 2 Refactoring Complete (2025-11-10) - See <a href="dev/DEVELOPER_GUIDE.html">dev/DEVELOPER_GUIDE.md</a> section 4.2 for details</p>
<p><strong>IMPORTANT API CHANGES</strong>: - <strong>Phase 1</strong> (2025-11-09): - <code>model_fit</code> renamed to <code>fit_results</code> - <code>llm_provider</code> and <code>llm_model</code> renamed to <code>provider</code> and <code>model</code> - New config objects: <code><a href="reference/llm_args.html">llm_args()</a></code>, <code><a href="reference/fa_args.html">fa_args()</a></code>, <code><a href="reference/output_args.html">output_args()</a></code> - <strong>Phase 2</strong> (2025-11-10): - <code><a href="https://github.com/matthiaskloft/psychinterpreter/reference/interpret_fa.html">interpret_fa()</a></code> removed entirely (functionality now in S3 generic <code><a href="reference/build_model_data.html">build_model_data()</a></code>) - New architecture: interpret() → interpret_core() → build_model_data.fa() - All 169 tests passing with new S3 generic system</p>
<hr><div class="section level2">
<h2 id="quick-reference">Quick Reference<a class="anchor" aria-label="anchor" href="#quick-reference"></a></h2>
<p><strong>What It Does</strong>: Automates interpretation of exploratory factor analysis (EFA) results using Large Language Models via the <code>ellmer</code> package.</p>
<p><strong>Main Entry Points</strong>: - <code><a href="reference/interpret.html">interpret()</a></code> - Universal generic (ONLY public API for interpretations) - <code><a href="reference/chat_session.html">chat_session()</a></code> - Create persistent LLM session (saves ~40-60% tokens for multiple analyses)</p>
<p><strong>Standards for Examples/Tests</strong>: - Always use <code>provider = "ollama"</code> and <code>model = "gpt-oss:20b-cloud"</code> - For LLM tests: <code>word_limit = 20</code> (minimum allowed) for token efficiency</p>
<p><strong>Documentation Structure</strong>: - <strong>CLAUDE.md</strong> (this file): Usage guide and quick reference for Claude Code sessions - <strong>dev/DEVELOPER_GUIDE.md</strong>: Technical architecture and implementation details for maintainers - <strong>dev/TESTING_GUIDELINES.md</strong>: Testing standards and patterns - <strong>dev/templates/</strong>: Ready-to-copy code templates for implementing new model types (GM, IRT, CDM) - <strong>dev/MODEL_IMPLEMENTATION_GUIDE.md</strong>: Conceptual guide for new model type implementation</p>
<hr></div>
<div class="section level2">
<h2 id="table-of-contents">Table of Contents<a class="anchor" aria-label="anchor" href="#table-of-contents"></a></h2>
<ol style="list-style-type: decimal"><li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#usage-patterns">Usage Patterns</a></li>
<li><a href="#common-workflows">Common Workflows</a></li>
<li><a href="#common-pitfalls">Common Pitfalls</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#active-todos">Active TODOs</a></li>
<li><a href="#quick-reference-tables">Quick Reference Tables</a></li>
</ol><hr></div>
</div>
<div class="section level1">
<h1 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a></h1>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a></h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"username/psychinterpreter"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="single-analysis">Single Analysis<a class="anchor" aria-label="anchor" href="#single-analysis"></a></h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://matthiaskloft.github.io/psychinterpreter/" class="external-link">psychinterpreter</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. Run factor analysis</span></span>
<span><span class="va">fa_result</span> <span class="op">&lt;-</span> <span class="fu">psych</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">fa</a></span><span class="op">(</span><span class="va">data</span>, nfactors <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Prepare variable descriptions</span></span>
<span><span class="va">var_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"var1"</span>, <span class="st">"var2"</span>, <span class="va">...</span><span class="op">)</span>,</span>
<span>  description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Description of variable 1"</span>, <span class="st">"Description of variable 2"</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Get interpretation</span></span>
<span><span class="va">interpretation</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span></span>
<span>  fit_results <span class="op">=</span> <span class="va">fa_result</span>,</span>
<span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"ollama"</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"gpt-oss:20b-cloud"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4. View and export results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">interpretation</span><span class="op">)</span>                                    <span class="co"># Print report</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">interpretation</span><span class="op">)</span>                                     <span class="co"># Visualize loadings</span></span>
<span><span class="fu"><a href="reference/export_interpretation.html">export_interpretation</a></span><span class="op">(</span><span class="va">interpretation</span>, <span class="st">"results.md"</span>, <span class="st">"md"</span><span class="op">)</span> <span class="co"># Export</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiple-analyses-token-efficient">Multiple Analyses (Token-Efficient)<a class="anchor" aria-label="anchor" href="#multiple-analyses-token-efficient"></a></h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create session once (saves ~40-60% tokens)</span></span>
<span><span class="va">chat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/chat_session.html">chat_session</a></span><span class="op">(</span></span>
<span>  model_type <span class="op">=</span> <span class="st">"fa"</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"ollama"</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"gpt-oss:20b-cloud"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reuse for multiple interpretations</span></span>
<span><span class="va">result1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>chat_session <span class="op">=</span> <span class="va">chat</span>, fit_results <span class="op">=</span> <span class="va">fa1</span>, variable_info <span class="op">=</span> <span class="va">vars1</span><span class="op">)</span></span>
<span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>chat_session <span class="op">=</span> <span class="va">chat</span>, fit_results <span class="op">=</span> <span class="va">fa2</span>, variable_info <span class="op">=</span> <span class="va">vars2</span><span class="op">)</span></span>
<span><span class="va">result3</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>chat_session <span class="op">=</span> <span class="va">chat</span>, fit_results <span class="op">=</span> <span class="va">fa3</span>, variable_info <span class="op">=</span> <span class="va">vars3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check cumulative token usage</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">chat</span><span class="op">)</span></span></code></pre></div>
<hr></div>
</div>
<div class="section level1">
<h1 id="usage-patterns">Usage Patterns<a class="anchor" aria-label="anchor" href="#usage-patterns"></a></h1>
<p>The <code><a href="reference/interpret.html">interpret()</a></code> function accepts different input types. <strong>All arguments are named</strong> to prevent confusion.</p>
<div class="section level2">
<h2 id="pattern-1-fitted-model-objects-recommended">Pattern 1: Fitted Model Objects (Recommended)<a class="anchor" aria-label="anchor" href="#pattern-1-fitted-model-objects-recommended"></a></h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Automatically extracts loadings from model objects</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span></span>
<span>  model_fit <span class="op">=</span> <span class="fu">psych</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">fa</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>,        <span class="co"># Or lavaan::efa(), mirt::mirt(), etc.</span></span>
<span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span>
<span>  llm_provider <span class="op">=</span> <span class="st">"ollama"</span>,</span>
<span>  llm_model <span class="op">=</span> <span class="st">"gpt-oss:20b-cloud"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Supported model types</strong>: - <code><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">psych::fa()</a></code>, <code><a href="https://rdrr.io/pkg/psych/man/principal.html" class="external-link">psych::principal()</a></code> - <code><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">lavaan::cfa()</a></code>, <code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code>, <code><a href="https://rdrr.io/pkg/lavaan/man/efa.html" class="external-link">lavaan::efa()</a></code> - <code><a href="https://philchalmers.github.io/mirt/reference/mirt.html" class="external-link">mirt::mirt()</a></code></p>
</div>
<div class="section level2">
<h2 id="pattern-2-structured-list">Pattern 2: Structured List<a class="anchor" aria-label="anchor" href="#pattern-2-structured-list"></a></h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For custom data structures</span></span>
<span><span class="co"># Both loadings and Phi can be matrices or data.frames</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span></span>
<span>  model_fit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    loadings <span class="op">=</span> <span class="va">loadings_matrix</span>,</span>
<span>    Phi <span class="op">=</span> <span class="va">correlation_matrix</span>          <span class="co"># Optional (for oblique rotations)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span>
<span>  model_type <span class="op">=</span> <span class="st">"fa"</span>,                  <span class="co"># REQUIRED for lists</span></span>
<span>  llm_provider <span class="op">=</span> <span class="st">"ollama"</span>,</span>
<span>  llm_model <span class="op">=</span> <span class="st">"gpt-oss:20b-cloud"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="pattern-3-with-chat-session-token-efficient">Pattern 3: With Chat Session (Token-Efficient)<a class="anchor" aria-label="anchor" href="#pattern-3-with-chat-session-token-efficient"></a></h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create session once</span></span>
<span><span class="va">chat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/chat_session.html">chat_session</a></span><span class="op">(</span>model_type <span class="op">=</span> <span class="st">"fa"</span>, provider <span class="op">=</span> <span class="st">"ollama"</span>, model <span class="op">=</span> <span class="st">"gpt-oss:20b-cloud"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use with any model_fit type</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>chat_session <span class="op">=</span> <span class="va">chat</span>, model_fit <span class="op">=</span> <span class="va">fa_result</span>, variable_info <span class="op">=</span> <span class="va">var_info</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>chat_session <span class="op">=</span> <span class="va">chat</span>, model_fit <span class="op">=</span> <span class="va">loadings_list</span>, variable_info <span class="op">=</span> <span class="va">var_info</span><span class="op">)</span>  <span class="co"># Structured list works too</span></span></code></pre></div>
<p><strong>When to use each</strong>: - <strong>Single analysis</strong>: Pattern 1 (fitted model) - simplest - <strong>Multiple analyses</strong>: Pattern 3 (chat session) - most efficient - <strong>Custom data</strong>: Pattern 2 (structured list)</p>
<hr></div>
</div>
<div class="section level1">
<h1 id="common-workflows">Common Workflows<a class="anchor" aria-label="anchor" href="#common-workflows"></a></h1>
<div class="section level2">
<h2 id="debugging-llm-issues">Debugging LLM Issues<a class="anchor" aria-label="anchor" href="#debugging-llm-issues"></a></h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View full prompts and responses</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, echo <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check JSON parsing with raw response (same function)</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, echo <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="customizing-output">Customizing Output<a class="anchor" aria-label="anchor" href="#customizing-output"></a></h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Control verbosity</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, silent <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>  <span class="co"># Show report + messages (default)</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, silent <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>  <span class="co"># Messages only, no report</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, silent <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>  <span class="co"># Completely silent</span></span>
<span></span>
<span><span class="co"># Output formats</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, output_format <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span>      <span class="co"># Default: plain text</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, output_format <span class="op">=</span> <span class="st">"markdown"</span><span class="op">)</span>  <span class="co"># Markdown format</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-visualizations">Creating Visualizations<a class="anchor" aria-label="anchor" href="#creating-visualizations"></a></h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create color-blind friendly heatmap</span></span>
<span><span class="va">interpretation</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">interpretation</span><span class="op">)</span>  <span class="co"># Uses blue-orange diverging scale</span></span>
<span></span>
<span><span class="co"># Customize cutoff for highlighting</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">interpretation</span>, cutoff <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save to file</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">interpretation</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"loadings_heatmap.png"</span>, <span class="va">p</span>, width <span class="op">=</span> <span class="fl">10</span>, height <span class="op">=</span> <span class="fl">8</span>, dpi <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Further customize with ggplot2</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"My Custom Title"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use package theme for other plots</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/theme_psychinterpreter.html">theme_psychinterpreter</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Apply package theme</span></span>
<span></span>
<span><span class="co"># Access color palettes directly</span></span>
<span><span class="va">colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/psychinterpreter_colors.html">psychinterpreter_colors</a></span><span class="op">(</span><span class="st">"diverging"</span><span class="op">)</span>    <span class="co"># Blue-white-orange</span></span>
<span><span class="va">cat_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/psychinterpreter_colors.html">psychinterpreter_colors</a></span><span class="op">(</span><span class="st">"categorical"</span><span class="op">)</span> <span class="co"># Okabe-Ito palette</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="working-with-weak-factors">Working with Weak Factors<a class="anchor" aria-label="anchor" href="#working-with-weak-factors"></a></h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Emergency rule: use top N loadings if none exceed cutoff</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, n_emergency <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>  <span class="co"># Use top 3 loadings (default)</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, n_emergency <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>  <span class="co"># Label weak factors as "undefined"</span></span>
<span></span>
<span><span class="co"># Hide non-significant loadings to save tokens</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, hide_low_loadings <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="api-configuration">API Configuration<a class="anchor" aria-label="anchor" href="#api-configuration"></a></h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set API keys as environment variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>OPENAI_API_KEY <span class="op">=</span> <span class="st">"your-key"</span><span class="op">)</span>      <span class="co"># OpenAI</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>ANTHROPIC_API_KEY <span class="op">=</span> <span class="st">"your-key"</span><span class="op">)</span>   <span class="co"># Anthropic</span></span>
<span><span class="co"># Ollama (local): no key needed</span></span></code></pre></div>
<hr></div>
</div>
<div class="section level1">
<h1 id="common-pitfalls">Common Pitfalls<a class="anchor" aria-label="anchor" href="#common-pitfalls"></a></h1>
<div class="section level2">
<h2 id="id_1-positional-vs-named-arguments">1. Positional vs Named Arguments<a class="anchor" aria-label="anchor" href="#id_1-positional-vs-named-arguments"></a></h2>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ❌ WRONG - positional arguments</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">chat</span>, <span class="va">loadings</span>, <span class="va">var_info</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ✅ CORRECT - named arguments</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>chat_session <span class="op">=</span> <span class="va">chat</span>, model_fit <span class="op">=</span> <span class="va">loadings</span>, variable_info <span class="op">=</span> <span class="va">var_info</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="id_2-missing-model_type-for-structured-lists">2. Missing model_type for Structured Lists<a class="anchor" aria-label="anchor" href="#id_2-missing-model_type-for-structured-lists"></a></h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ❌ WRONG</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span></span>
<span>  model_fit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>loadings <span class="op">=</span> <span class="va">loadings_matrix</span><span class="op">)</span>,</span>
<span>  variable_info <span class="op">=</span> <span class="va">var_info</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ✅ CORRECT</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span></span>
<span>  model_fit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>loadings <span class="op">=</span> <span class="va">loadings_matrix</span><span class="op">)</span>,</span>
<span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span>
<span>  model_type <span class="op">=</span> <span class="st">"fa"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="id_3-not-reusing-chat-sessions">3. Not Reusing Chat Sessions<a class="anchor" aria-label="anchor" href="#id_3-not-reusing-chat-sessions"></a></h2>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ❌ INEFFICIENT - creates new session each time (~2x token cost)</span></span>
<span><span class="va">result1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>model_fit <span class="op">=</span> <span class="va">fa1</span>, variable_info <span class="op">=</span> <span class="va">vars1</span>, llm_provider <span class="op">=</span> <span class="st">"ollama"</span>, llm_model <span class="op">=</span> <span class="st">"gpt-oss:20b-cloud"</span><span class="op">)</span></span>
<span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>model_fit <span class="op">=</span> <span class="va">fa2</span>, variable_info <span class="op">=</span> <span class="va">vars2</span>, llm_provider <span class="op">=</span> <span class="st">"ollama"</span>, llm_model <span class="op">=</span> <span class="st">"gpt-oss:20b-cloud"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ✅ EFFICIENT - reuse session (saves ~40-60% tokens)</span></span>
<span><span class="va">chat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/chat_session.html">chat_session</a></span><span class="op">(</span>model_type <span class="op">=</span> <span class="st">"fa"</span>, provider <span class="op">=</span> <span class="st">"ollama"</span>, model <span class="op">=</span> <span class="st">"gpt-oss:20b-cloud"</span><span class="op">)</span></span>
<span><span class="va">result1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>chat_session <span class="op">=</span> <span class="va">chat</span>, model_fit <span class="op">=</span> <span class="va">fa1</span>, variable_info <span class="op">=</span> <span class="va">vars1</span><span class="op">)</span></span>
<span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>chat_session <span class="op">=</span> <span class="va">chat</span>, model_fit <span class="op">=</span> <span class="va">fa2</span>, variable_info <span class="op">=</span> <span class="va">vars2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="id_4-wrong-pipe-operator-in-package-code">4. Wrong Pipe Operator in Package Code<a class="anchor" aria-label="anchor" href="#id_4-wrong-pipe-operator-in-package-code"></a></h2>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ❌ WRONG - magrittr pipe</span></span>
<span><span class="va">data</span> <span class="op">%&gt;%</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ✅ CORRECT - base R pipe</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="id_5-additional_info-parameter-location">5. additional_info Parameter Location<a class="anchor" aria-label="anchor" href="#id_5-additional_info-parameter-location"></a></h2>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ❌ WRONG - additional_info inside model_fit list</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span></span>
<span>  model_fit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>loadings <span class="op">=</span> <span class="va">loadings</span>, additional_info <span class="op">=</span> <span class="st">"Context"</span><span class="op">)</span>,</span>
<span>  variable_info <span class="op">=</span> <span class="va">var_info</span>, model_type <span class="op">=</span> <span class="st">"fa"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ✅ CORRECT - additional_info as separate parameter</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span></span>
<span>  model_fit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>loadings <span class="op">=</span> <span class="va">loadings</span><span class="op">)</span>,</span>
<span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span>
<span>  additional_info <span class="op">=</span> <span class="st">"Context"</span>,  <span class="co"># Separate parameter</span></span>
<span>  model_type <span class="op">=</span> <span class="st">"fa"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="id_6-forgetting-documentation-regeneration">6. Forgetting Documentation Regeneration<a class="anchor" aria-label="anchor" href="#id_6-forgetting-documentation-regeneration"></a></h2>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># After modifying roxygen2 comments in R files:</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># ✅ ALWAYS run this</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="id_7-high-word_limit-in-tests">7. High word_limit in Tests<a class="anchor" aria-label="anchor" href="#id_7-high-word_limit-in-tests"></a></h2>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ❌ INEFFICIENT</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>fit_results <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>loadings <span class="op">=</span> <span class="va">loadings</span><span class="op">)</span>, variable_info <span class="op">=</span> <span class="va">var_info</span>,</span>
<span>          model_type <span class="op">=</span> <span class="st">"fa"</span>, provider <span class="op">=</span> <span class="st">"ollama"</span>, word_limit <span class="op">=</span> <span class="fl">150</span><span class="op">)</span>  <span class="co"># Default, wastes tokens</span></span>
<span></span>
<span><span class="co"># ✅ EFFICIENT</span></span>
<span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span>fit_results <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>loadings <span class="op">=</span> <span class="va">loadings</span><span class="op">)</span>, variable_info <span class="op">=</span> <span class="va">var_info</span>,</span>
<span>          model_type <span class="op">=</span> <span class="st">"fa"</span>, provider <span class="op">=</span> <span class="st">"ollama"</span>, word_limit <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>   <span class="co"># Minimum allowed</span></span></code></pre></div>
<hr></div>
</div>
<div class="section level1">
<h1 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a></h1>
<div class="section level2">
<h2 id="error-model_type-must-be-specified">“Error: model_type must be specified”<a class="anchor" aria-label="anchor" href="#error-model_type-must-be-specified"></a></h2>
<p><strong>Cause</strong>: Using structured list without specifying model_type</p>
<p><strong>Solution</strong>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span></span>
<span>  model_fit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>loadings <span class="op">=</span> <span class="va">loadings_matrix</span><span class="op">)</span>,</span>
<span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span>
<span>  model_type <span class="op">=</span> <span class="st">"fa"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="error-documented-arguments-not-in-usage">“Error: Documented arguments not in usage”<a class="anchor" aria-label="anchor" href="#error-documented-arguments-not-in-usage"></a></h2>
<p><strong>Cause</strong>: Roxygen2 documentation out of sync</p>
<p><strong>Solution</strong>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="tests-taking-too-long">Tests Taking Too Long<a class="anchor" aria-label="anchor" href="#tests-taking-too-long"></a></h2>
<p><strong>Causes &amp; Solutions</strong>: 1. Too many LLM tests → Use cached interpretations instead 2. High word_limit → Set <code>word_limit = 20</code> in tests 3. Large fixtures → Use <code>minimal_*</code> fixtures for LLM tests 4. Running on CI → Add <code>skip_on_ci()</code> to LLM tests</p>
</div>
<div class="section level2">
<h2 id="json-parsing-failures">JSON Parsing Failures<a class="anchor" aria-label="anchor" href="#json-parsing-failures"></a></h2>
<p><strong>Cause</strong>: LLM returned malformed JSON</p>
<p><strong>Package handles automatically</strong> via multi-tier fallback: 1. Cleaned JSON parsing 2. Pattern-based extraction 3. Default values</p>
<p><strong>To debug</strong>: Use <code>echo = "all"</code> to see raw LLM response</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/interpret.html">interpret</a></span><span class="op">(</span><span class="va">...</span>, echo <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="word-limit-messages">Word Limit Messages<a class="anchor" aria-label="anchor" href="#word-limit-messages"></a></h2>
<p><strong>Cause</strong>: LLM response exceeded <code>word_limit</code> parameter</p>
<p><strong>This is informational</strong> (not an error). Options: 1. Increase <code>word_limit</code> if needed 2. Ignore if output quality is acceptable 3. Review interpretation for verbosity</p>
</div>
<div class="section level2">
<h2 id="negativezero-token-counts">Negative/Zero Token Counts<a class="anchor" aria-label="anchor" href="#negativezero-token-counts"></a></h2>
<p><strong>Cause</strong>: Provider-specific behavior - <strong>Ollama</strong>: No token tracking support (returns 0) - <strong>Anthropic</strong>: Caches system prompts (may undercount) - <strong>OpenAI</strong>: Generally accurate</p>
<p><strong>Solution</strong>: Current version uses <code>max(0, delta)</code> protection to prevent negatives</p>
<hr></div>
</div>
<div class="section level1">
<h1 id="active-todos">Active TODOs<a class="anchor" aria-label="anchor" href="#active-todos"></a></h1>
<ul><li><p>can we further refine R script naming scheme?</p></li>
<li><p>should we split up visualization for better abstraction?</p></li>
<li><p><strong>Optimize tests further</strong> - Review fixture usage and caching strategies</p></li>
<li><p><strong>Implement gaussian_mixture class</strong> - Requires 7 S3 methods (see dev/DEVELOPER_GUIDE.md)</p></li>
</ul><hr></div>
<div class="section level1">
<h1 id="quick-reference-tables">Quick Reference Tables<a class="anchor" aria-label="anchor" href="#quick-reference-tables"></a></h1>
<div class="section level2">
<h2 id="key-functions">Key Functions<a class="anchor" aria-label="anchor" href="#key-functions"></a></h2>
<table class="table"><colgroup><col width="52%"><col width="47%"></colgroup><thead><tr><th>Function</th>
<th>Purpose</th>
</tr></thead><tbody><tr><td><code><a href="reference/interpret.html">interpret()</a></code></td>
<td>Universal interpretation function (recommended)</td>
</tr><tr><td><code><a href="reference/chat_session.html">chat_session()</a></code></td>
<td>Create persistent LLM session</td>
</tr><tr><td><code><a href="reference/export_interpretation.html">export_interpretation()</a></code></td>
<td>Export to txt/md files</td>
</tr><tr><td><code><a href="reference/plot.fa_interpretation.html">plot.fa_interpretation()</a></code></td>
<td>Visualize factor loadings with color-blind friendly palette</td>
</tr><tr><td><code><a href="reference/theme_psychinterpreter.html">theme_psychinterpreter()</a></code></td>
<td>Custom ggplot2 theme for publication-ready plots</td>
</tr><tr><td><code><a href="reference/psychinterpreter_colors.html">psychinterpreter_colors()</a></code></td>
<td>Get color-blind friendly palettes</td>
</tr><tr><td><code><a href="reference/find_cross_loadings.html">find_cross_loadings()</a></code></td>
<td>Identify cross-loading variables</td>
</tr><tr><td><code><a href="reference/find_no_loadings.html">find_no_loadings()</a></code></td>
<td>Identify orphaned variables</td>
</tr><tr><td><code><a href="reference/llm_args.html">llm_args()</a></code></td>
<td>Create LLM configuration object</td>
</tr><tr><td><code><a href="reference/fa_args.html">fa_args()</a></code></td>
<td>Create FA configuration object</td>
</tr><tr><td><code><a href="reference/output_args.html">output_args()</a></code></td>
<td>Create output configuration object</td>
</tr></tbody></table></div>
<div class="section level2">
<h2 id="key-parameters">Key Parameters<a class="anchor" aria-label="anchor" href="#key-parameters"></a></h2>
<table class="table"><colgroup><col width="26%"><col width="19%"><col width="21%"><col width="31%"></colgroup><thead><tr><th>Parameter</th>
<th>Values</th>
<th>Default</th>
<th>Description</th>
</tr></thead><tbody><tr><td><code>silent</code></td>
<td>0, 1, 2</td>
<td>0</td>
<td>0=report+messages, 1=messages only, 2=silent</td>
</tr><tr><td><code>output_format</code></td>
<td>“text”, “markdown”</td>
<td>“text”</td>
<td>Report format</td>
</tr><tr><td><code>word_limit</code></td>
<td>20-500</td>
<td>150</td>
<td>Max words per factor interpretation</td>
</tr><tr><td><code>n_emergency</code></td>
<td>0-10</td>
<td>3</td>
<td>Top N loadings for weak factors (0=undefined)</td>
</tr><tr><td><code>hide_low_loadings</code></td>
<td>TRUE/FALSE</td>
<td>FALSE</td>
<td>Hide non-significant loadings in prompt</td>
</tr><tr><td><code>echo</code></td>
<td>“all”, “none”</td>
<td>“none”</td>
<td>Show LLM prompts/responses</td>
</tr></tbody></table></div>
<div class="section level2">
<h2 id="package-files">Package Files<a class="anchor" aria-label="anchor" href="#package-files"></a></h2>
<p><strong>See dev/DEVELOPER_GUIDE.md section 1.3 for detailed file structure</strong></p>
<table class="table"><colgroup><col width="47%"><col width="52%"></colgroup><thead><tr><th>Category</th>
<th>Key Files</th>
</tr></thead><tbody><tr><td><strong>Core</strong></td>
<td>core_interpret_dispatch.R, core_interpret.R, core_constants.R</td>
</tr><tr><td><strong>S3 Generics</strong></td>
<td>s3_model_data.R, s3_prompt_builder.R, s3_json_parser.R, s3_export.R</td>
</tr><tr><td><strong>Classes</strong></td>
<td>class_chat_session.R, class_interpretation.R</td>
</tr><tr><td><strong>Shared Utilities</strong></td>
<td>shared_config.R, shared_utils.R, shared_text.R, shared_visualization.R</td>
</tr><tr><td><strong>FA Implementation</strong></td>
<td>fa_model_data.R, fa_prompt_builder.R, fa_json.R, fa_diagnostics.R, fa_report.R, fa_visualization.R</td>
</tr><tr><td><strong>Tests</strong></td>
<td>tests/testthat/ (7 test files, 70+ tests)</td>
</tr></tbody></table></div>
<div class="section level2">
<h2 id="development-commands">Development Commands<a class="anchor" aria-label="anchor" href="#development-commands"></a></h2>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span>                                      <span class="co"># Regenerate documentation</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">test</a></span><span class="op">(</span><span class="op">)</span>                                          <span class="co"># Run all tests</span></span>
<span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_file.html" class="external-link">test_file</a></span><span class="op">(</span><span class="st">"tests/testthat/test-interpret_fa.R"</span><span class="op">)</span> <span class="co"># Run single test file</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">check</a></span><span class="op">(</span><span class="op">)</span>                                         <span class="co"># R CMD check</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span>                                      <span class="co"># Load for development</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="code-style-brief">Code Style (Brief)<a class="anchor" aria-label="anchor" href="#code-style-brief"></a></h2>
<ul><li>
<strong>Roxygen2</strong> for all exported functions</li>
<li>
<strong>Explicit namespacing</strong>: <code>package::function()</code>
</li>
<li>
<strong>CLI messaging</strong>: Use <code>cli::cli_*()</code> functions</li>
<li>
<strong>Pipe</strong>: Base R <code>|&gt;</code> (not <code>%&gt;%</code>)</li>
<li>
<strong>Naming</strong>: snake_case for functions, S3 methods as <code>method.class()</code>
</li>
</ul><p><strong>For detailed style guide</strong>: See dev/DEVELOPER_GUIDE.md section 5.7</p>
<hr></div>
</div>
<div class="section level1">
<h1 id="maintaining-documentation">Maintaining Documentation<a class="anchor" aria-label="anchor" href="#maintaining-documentation"></a></h1>
<div class="section level2">
<h2 id="when-to-update-claudemd">When to Update CLAUDE.md<a class="anchor" aria-label="anchor" href="#when-to-update-claudemd"></a></h2>
<p>Update this file when making <strong>user-facing changes</strong>: - New user-facing functions or parameters - Changes to usage patterns or workflows - New common pitfalls discovered - Changes to troubleshooting recommendations - Adding new Active TODOs</p>
<p><strong>Keep concise</strong> - focus on “how to use”, not “how it works internally”</p>
<p><strong>When completing TODOs</strong>: 1. Remove from “Active TODOs” section in CLAUDE.md 2. Add to DEVELOPER_GUIDE.md section 4.2 (Package History) with date and details 3. Update “Last Updated” date in both files</p>
</div>
<div class="section level2">
<h2 id="when-to-update-devdeveloper_guidemd">When to Update dev/DEVELOPER_GUIDE.md<a class="anchor" aria-label="anchor" href="#when-to-update-devdeveloper_guidemd"></a></h2>
<p>Update the developer guide when making <strong>architectural or implementation changes</strong>: - Changes to S3 dispatch system - Token tracking implementation modifications - New model type implementations (GM, IRT, CDM) - File structure reorganization - Design decision changes - Code style updates - Package history entries (completed TODOs, major refactors, bug fixes)</p>
<p><strong>Include technical details</strong> - flow diagrams, code locations (<a href="file:line" class="uri">file:line</a>), implementation rationale</p>
</div>
<div class="section level2">
<h2 id="document-maintenance-guidelines">Document Maintenance Guidelines<a class="anchor" aria-label="anchor" href="#document-maintenance-guidelines"></a></h2>
<ol style="list-style-type: decimal"><li>
<strong>Clear separation</strong>: CLAUDE.md = usage guide, DEV GUIDE = technical reference</li>
<li>
<strong>Cross-reference</strong>: Link between documents rather than duplicating content</li>
<li>
<strong>Update dates</strong>: Change “Last Updated” when making significant edits</li>
<li>
<strong>Version TODOs</strong>: When completing TODOs from CLAUDE.md, move them to DEV GUIDE section 4 (Package History) with dates</li>
<li>
<strong>Keep current</strong>: Delete obsolete sections, update examples to match current API</li>
</ol><hr><p><strong>Last Updated</strong>: 2025-11-10 <strong>Maintainer</strong>: Update when making significant user-facing changes - as long as the package is in version 0.0.0.9000, backwards-compatibility can be ignored in development since the package is not officially released - use kable() and kable_styling() for .Qmd articles</p>
</div>
</div>


  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthias Kloft.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

