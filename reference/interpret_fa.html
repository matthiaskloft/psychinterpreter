<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Interpret Exploratory Factor Analysis Results — interpret_fa • psychinterpreter</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Interpret Exploratory Factor Analysis Results — interpret_fa"><meta name="description" content="This function uses Large Language Models (LLMs) to automatically interpret FA results by
analyzing factor loadings and variable descriptions. It generates suggested factor names,
detailed interpretations, and identifies cross-loadings. Variance explained is automatically
calculated from the loadings (sum of squared loadings / number of variables)."><meta property="og:description" content="This function uses Large Language Models (LLMs) to automatically interpret FA results by
analyzing factor loadings and variable descriptions. It generates suggested factor names,
detailed interpretations, and identifies cross-loadings. Variance explained is automatically
calculated from the loadings (sum of squared loadings / number of variables)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">psychinterpreter</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/01-Basic_Usage.html">Basic usage of the 'psychinterpreter' Package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Interpret Exploratory Factor Analysis Results</h1>

      <div class="d-none name"><code>interpret_fa.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function uses Large Language Models (LLMs) to automatically interpret FA results by
analyzing factor loadings and variable descriptions. It generates suggested factor names,
detailed interpretations, and identifies cross-loadings. Variance explained is automatically
calculated from the loadings (sum of squared loadings / number of variables).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">interpret_fa</span><span class="op">(</span></span>
<span>  <span class="va">loadings</span>,</span>
<span>  <span class="va">variable_info</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  n_emergency <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  llm_provider <span class="op">=</span> <span class="st">"ollama"</span>,</span>
<span>  llm_model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  additional_info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  factor_cor_mat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort_loadings <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  suppress_small <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  word_limit <span class="op">=</span> <span class="fl">150</span>,</span>
<span>  max_line_length <span class="op">=</span> <span class="fl">80</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  echo <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  output_format <span class="op">=</span> <span class="st">"text"</span>,</span>
<span>  heading_level <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  suppress_heading <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  chat_session <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-loadings">loadings<a class="anchor" aria-label="anchor" href="#arg-loadings"></a></dt>
<dd><p>A dataframe or matrix of factor loadings (variables x factors)</p></dd>


<dt id="arg-variable-info">variable_info<a class="anchor" aria-label="anchor" href="#arg-variable-info"></a></dt>
<dd><p>A dataframe with at least two columns:</p><ul><li><p>variable: variable names matching row names in loadings</p></li>
<li><p>description: labels or descriptions of the variables</p></li>
</ul></dd>


<dt id="arg-cutoff">cutoff<a class="anchor" aria-label="anchor" href="#arg-cutoff"></a></dt>
<dd><p>Numeric. Minimum loading value to consider (default = 0.3)</p></dd>


<dt id="arg-n-emergency">n_emergency<a class="anchor" aria-label="anchor" href="#arg-n-emergency"></a></dt>
<dd><p>Integer. When a factor has no loadings above the cutoff, use the
top N highest loadings (even if below cutoff) for interpretation (default = 2)</p></dd>


<dt id="arg-llm-provider">llm_provider<a class="anchor" aria-label="anchor" href="#arg-llm-provider"></a></dt>
<dd><p>Character. Which LLM provider to use.
Any provider supported by ellmer::chat() (e.g., "openai", "anthropic", "ollama", etc.)
See ellmer documentation for the complete list of supported providers.</p></dd>


<dt id="arg-llm-model">llm_model<a class="anchor" aria-label="anchor" href="#arg-llm-model"></a></dt>
<dd><p>Character. Specific model to use (e.g., "gpt-4o-mini", "claude-3-5-sonnet-20241022", "gemma2:9b")</p></dd>


<dt id="arg-additional-info">additional_info<a class="anchor" aria-label="anchor" href="#arg-additional-info"></a></dt>
<dd><p>Character. Optional additional context for the LLM, such as theoretical background,
research area information, or domain-specific knowledge to inform factor interpretation (default = NULL)</p></dd>


<dt id="arg-factor-cor-mat">factor_cor_mat<a class="anchor" aria-label="anchor" href="#arg-factor-cor-mat"></a></dt>
<dd><p>Matrix or data.frame. Optional factor correlation matrix for oblique rotations.
Should have factor names as row and column names matching the loadings factor columns. Used to inform
interpretation of factor relationships and enhance understanding of discriminant validity. Higher
correlations suggest related constructs, while lower correlations indicate distinct factors.
If NULL, factors are assumed to be orthogonal (default = NULL)</p></dd>


<dt id="arg-sort-loadings">sort_loadings<a class="anchor" aria-label="anchor" href="#arg-sort-loadings"></a></dt>
<dd><p>Logical. Sort variables by loading strength within factors (default = TRUE)</p></dd>


<dt id="arg-suppress-small">suppress_small<a class="anchor" aria-label="anchor" href="#arg-suppress-small"></a></dt>
<dd><p>Logical. If TRUE, replaces loadings below cutoff with empty strings in the
loading_matrix output for cleaner display. If FALSE, shows all loadings as numbers.
Note: This only affects the output loading_matrix format, not the LLM interpretation
which always uses the cutoff (default = TRUE)</p></dd>


<dt id="arg-params">params<a class="anchor" aria-label="anchor" href="#arg-params"></a></dt>
<dd><p>Parameters for the LLM created using ellmer::params() function (e.g., params(temperature = 0.7, seed = 42)).
Provides a provider-agnostic interface for setting model parameters like temperature, seed, max_tokens, etc.
If NULL, uses provider defaults. See ellmer::params() documentation for supported parameters.</p></dd>


<dt id="arg-word-limit">word_limit<a class="anchor" aria-label="anchor" href="#arg-word-limit"></a></dt>
<dd><p>Integer. Maximum number of words for LLM interpretations (default = 150)</p></dd>


<dt id="arg-max-line-length">max_line_length<a class="anchor" aria-label="anchor" href="#arg-max-line-length"></a></dt>
<dd><p>Integer. Maximum line length for console output text wrapping (default = 80)</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>Logical. If TRUE, suppresses printing the interpretation report and progress bars to console (default = FALSE)</p></dd>


<dt id="arg-echo">echo<a class="anchor" aria-label="anchor" href="#arg-echo"></a></dt>
<dd><p>Character. Controls what is echoed during LLM interaction. One of "none" (no output),
"output" (show only LLM responses), or "all" (show prompts and responses). Passed directly
to the ellmer chat function for debugging and transparency (default = "none")</p></dd>


<dt id="arg-output-format">output_format<a class="anchor" aria-label="anchor" href="#arg-output-format"></a></dt>
<dd><p>Character. Output format for the report: "text" or "markdown" (default = "text")</p></dd>


<dt id="arg-heading-level">heading_level<a class="anchor" aria-label="anchor" href="#arg-heading-level"></a></dt>
<dd><p>Integer. Starting heading level for markdown output (default = 1). Used when output_format = "markdown"</p></dd>


<dt id="arg-suppress-heading">suppress_heading<a class="anchor" aria-label="anchor" href="#arg-suppress-heading"></a></dt>
<dd><p>Logical. If TRUE, suppresses the main "Exploratory Factor Analysis Interpretation"
heading, allowing for better integration into existing documents that already have appropriate headings
above the analysis output (default = FALSE)</p></dd>


<dt id="arg-chat-session">chat_session<a class="anchor" aria-label="anchor" href="#arg-chat-session"></a></dt>
<dd><p>A chat_fa object for reusing existing chat sessions. If provided, uses the existing
chat session (avoiding resending the system prompt and reducing token costs). If NULL, creates a new
chat session. Useful for processing multiple analyses efficiently (default = NULL)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A fa_interpretation object (S3 class) containing:</p><dl><dt>factor_summaries</dt>
<dd><p>List with detailed analysis for each factor, including variables,
loadings, significance status, and variance_explained</p></dd>

<dt>suggested_names</dt>
<dd><p>Named list of LLM-generated factor names</p></dd>

<dt>loading_matrix</dt>
<dd><p>Formatted loading matrix with small loadings optionally suppressed</p></dd>

<dt>report</dt>
<dd><p>Complete formatted text/markdown report including factor correlations (when provided)</p></dd>

<dt>llm_info</dt>
<dd><p>List containing provider name and model used for interpretation</p></dd>

<dt>chat</dt>
<dd><p>Complete ellmer chat object with full conversation history and cost information</p></dd>

<dt>cross_loadings</dt>
<dd><p>Data frame of variables loading significantly on multiple factors</p></dd>

<dt>no_loadings</dt>
<dd><p>Data frame of variables with no loadings above cutoff threshold</p></dd>

<dt>elapsed_time</dt>
<dd><p>Total analysis time as difftime object</p></dd>

<dt>factor_cor_mat</dt>
<dd><p>Factor correlation matrix (when provided)</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses advanced processing to minimize LLM API calls and costs. Instead of individual
factor interpretation calls, it processes all factors simultaneously in a single comprehensive prompt
with structured sections for optimal LLM comprehension.</p>
<p><strong>Key Features:</strong></p><ul><li><p><strong>Structured LLM Prompting</strong>: Uses organized sections (Factor Naming, Factor Interpretation,
Factor Relationships, Output Requirements) for consistent, high-quality results</p></li>
<li><p><strong>Factor Correlation Integration</strong>: When factor_cor_mat is provided, incorporates factor
relationships into interpretations for enhanced discriminant validity assessment</p></li>
<li><p><strong>Optimized Word Targeting</strong>: Targets 80%-100% of word limit for comprehensive interpretations</p></li>
<li><p><strong>Emergency Rule</strong>: Factors with no loadings above cutoff use top N highest loadings</p></li>
<li><p><strong>Cross-loading Detection</strong>: Identifies variables loading on multiple factors</p></li>
<li><p><strong>Batch Processing</strong>: Single API call processes all factors simultaneously</p></li>
</ul><p><strong>Technical Details:</strong></p><ul><li><p>Variance explained calculated as sum of squared loadings divided by number of variables</p></li>
<li><p>Supports both orthogonal (factor_cor_mat = NULL) and oblique rotation results</p></li>
<li><p>Uses compact vector format for efficient token usage in LLM prompts</p></li>
<li><p>JSON output parsing with fallback extraction methods for robustness</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function requires:</p><ul><li><p>Internet connectivity for LLM API calls</p></li>
<li><p>Valid API credentials for the chosen LLM provider (set via environment variables)</p></li>
<li><p>The ellmer package for LLM communication</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Set up API credentials first</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>OPENAI_API_KEY <span class="op">=</span> <span class="st">"your-api-key-here"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Assuming you have factor analysis results</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://personality-project.org/r/psych/" class="external-link">psych</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fa_results</span> <span class="op">&lt;-</span> <span class="fu">psych</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">fa</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, nfactors <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create variable info dataframe with realistic descriptions</span></span></span>
<span class="r-in"><span><span class="va">var_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mpg"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span>, <span class="st">"hp"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  description <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Miles per gallon fuel efficiency"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Number of engine cylinders"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Engine displacement in cubic inches"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Engine horsepower output"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic interpretation with OpenAI</span></span></span>
<span class="r-in"><span><span class="va">interpretation</span> <span class="op">&lt;-</span> <span class="fu">interpret_fa</span><span class="op">(</span></span></span>
<span class="r-in"><span>  loadings <span class="op">=</span> <span class="va">fa_results</span><span class="op">$</span><span class="va">loadings</span>,</span></span>
<span class="r-in"><span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span></span>
<span class="r-in"><span>  llm_provider <span class="op">=</span> <span class="st">"openai"</span>,</span></span>
<span class="r-in"><span>  llm_model <span class="op">=</span> <span class="st">"gpt-4o-mini"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using persistent chat session for multiple analyses (efficient)</span></span></span>
<span class="r-in"><span><span class="va">chat</span> <span class="op">&lt;-</span> <span class="fu"><a href="chat_fa.html">chat_fa</a></span><span class="op">(</span><span class="st">"anthropic"</span>, <span class="st">"claude-haiku-4-5-20251001"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multiple analyses with same chat session (saves tokens)</span></span></span>
<span class="r-in"><span><span class="va">interpretation1</span> <span class="op">&lt;-</span> <span class="fu">interpret_fa</span><span class="op">(</span></span></span>
<span class="r-in"><span>  loadings <span class="op">=</span> <span class="va">fa_results1</span><span class="op">$</span><span class="va">loadings</span>,</span></span>
<span class="r-in"><span>  variable_info <span class="op">=</span> <span class="va">var_info1</span>,</span></span>
<span class="r-in"><span>  chat_session <span class="op">=</span> <span class="va">chat</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">interpretation2</span> <span class="op">&lt;-</span> <span class="fu">interpret_fa</span><span class="op">(</span></span></span>
<span class="r-in"><span>  loadings <span class="op">=</span> <span class="va">fa_results2</span><span class="op">$</span><span class="va">loadings</span>,</span></span>
<span class="r-in"><span>  variable_info <span class="op">=</span> <span class="va">var_info2</span>,</span></span>
<span class="r-in"><span>  chat_session <span class="op">=</span> <span class="va">chat</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check total token usage</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">chat</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Advanced usage with factor correlations and custom settings</span></span></span>
<span class="r-in"><span><span class="va">interpretation_advanced</span> <span class="op">&lt;-</span> <span class="fu">interpret_fa</span><span class="op">(</span></span></span>
<span class="r-in"><span>  loadings <span class="op">=</span> <span class="va">fa_results</span><span class="op">$</span><span class="va">loadings</span>,</span></span>
<span class="r-in"><span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span></span>
<span class="r-in"><span>  llm_provider <span class="op">=</span> <span class="st">"ollama"</span>,</span></span>
<span class="r-in"><span>  llm_model <span class="op">=</span> <span class="st">"llama3.1:8b"</span>,</span></span>
<span class="r-in"><span>  additional_info <span class="op">=</span> <span class="st">"This analysis examines automotive performance characteristics."</span>,</span></span>
<span class="r-in"><span>  factor_cor_mat <span class="op">=</span> <span class="va">fa_results</span><span class="op">$</span><span class="va">cor</span>,  <span class="co"># Factor correlation matrix for oblique rotations</span></span></span>
<span class="r-in"><span>  cutoff <span class="op">=</span> <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  word_limit <span class="op">=</span> <span class="fl">120</span>,</span></span>
<span class="r-in"><span>  params <span class="op">=</span> <span class="fu"><a href="https://ellmer.tidyverse.org/reference/params.html" class="external-link">params</a></span><span class="op">(</span>temperature <span class="op">=</span> <span class="fl">0.3</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  output_format <span class="op">=</span> <span class="st">"markdown"</span>,</span></span>
<span class="r-in"><span>  heading_level <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  silent <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Usage with factor correlations for oblique rotation</span></span></span>
<span class="r-in"><span><span class="va">fa_oblique</span> <span class="op">&lt;-</span> <span class="fu">psych</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/psych/man/fa.html" class="external-link">fa</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span>, nfactors <span class="op">=</span> <span class="fl">3</span>, rotate <span class="op">=</span> <span class="st">"oblimin"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">interpretation_oblique</span> <span class="op">&lt;-</span> <span class="fu">interpret_fa</span><span class="op">(</span></span></span>
<span class="r-in"><span>  loadings <span class="op">=</span> <span class="va">fa_oblique</span><span class="op">$</span><span class="va">loadings</span>,</span></span>
<span class="r-in"><span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span></span>
<span class="r-in"><span>  factor_cor_mat <span class="op">=</span> <span class="va">fa_oblique</span><span class="op">$</span><span class="va">Phi</span>,  <span class="co"># Use factor correlation matrix from oblique rotation</span></span></span>
<span class="r-in"><span>  llm_provider <span class="op">=</span> <span class="st">"openai"</span>,</span></span>
<span class="r-in"><span>  llm_model <span class="op">=</span> <span class="st">"gpt-4o-mini"</span>,</span></span>
<span class="r-in"><span>  additional_info <span class="op">=</span> <span class="st">"Oblique rotation allowing correlated factors in automotive data"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For integration into existing Quarto/R Markdown documents</span></span></span>
<span class="r-in"><span><span class="va">interpretation_embedded</span> <span class="op">&lt;-</span> <span class="fu">interpret_fa</span><span class="op">(</span></span></span>
<span class="r-in"><span>  loadings <span class="op">=</span> <span class="va">fa_results</span><span class="op">$</span><span class="va">loadings</span>,</span></span>
<span class="r-in"><span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span></span>
<span class="r-in"><span>  llm_provider <span class="op">=</span> <span class="st">"openai"</span>,</span></span>
<span class="r-in"><span>  llm_model <span class="op">=</span> <span class="st">"gpt-4o-mini"</span>,</span></span>
<span class="r-in"><span>  params <span class="op">=</span> <span class="fu"><a href="https://ellmer.tidyverse.org/reference/params.html" class="external-link">params</a></span><span class="op">(</span>temperature <span class="op">=</span> <span class="fl">0.7</span>, seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  output_format <span class="op">=</span> <span class="st">"markdown"</span>,</span></span>
<span class="r-in"><span>  heading_level <span class="op">=</span> <span class="fl">3</span>,  <span class="co"># Adjust to fit your document structure</span></span></span>
<span class="r-in"><span>  suppress_heading <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Skip main heading for better integration</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For debugging - see what prompts are sent to the LLM</span></span></span>
<span class="r-in"><span><span class="va">interpretation_debug</span> <span class="op">&lt;-</span> <span class="fu">interpret_fa</span><span class="op">(</span></span></span>
<span class="r-in"><span>  loadings <span class="op">=</span> <span class="va">fa_results</span><span class="op">$</span><span class="va">loadings</span>,</span></span>
<span class="r-in"><span>  variable_info <span class="op">=</span> <span class="va">var_info</span>,</span></span>
<span class="r-in"><span>  llm_provider <span class="op">=</span> <span class="st">"openai"</span>,</span></span>
<span class="r-in"><span>  llm_model <span class="op">=</span> <span class="st">"gpt-4o-mini"</span>,</span></span>
<span class="r-in"><span>  echo <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Display prompts and responses</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">interpretation</span><span class="op">$</span><span class="va">suggested_names</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">interpretation</span><span class="op">$</span><span class="va">report</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthias Kloft.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

