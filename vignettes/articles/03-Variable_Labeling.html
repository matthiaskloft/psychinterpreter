<html lang="en"><head>
<script src="03-Variable_Labeling_files/libs/quarto-html/popper.min.js"></script>
<script src="03-Variable_Labeling_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="03-Variable_Labeling_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="03-Variable_Labeling_files/libs/quarto-html/light-border.css" rel="stylesheet"><title>Variable Labeling with LLMs</title>
  <!-- Needed for testing but not used in final output -->
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
  </style>
  <link href="03-Variable_Labeling_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

  <script src="03-Variable_Labeling_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

  <link href="03-Variable_Labeling_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

  <script src="03-Variable_Labeling_files/libs/datatables-binding-0.34.0/datatables.js"></script>

  <script src="03-Variable_Labeling_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

  <link href="03-Variable_Labeling_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

  <link href="03-Variable_Labeling_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

  <script src="03-Variable_Labeling_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

  <link href="03-Variable_Labeling_files/libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">

  <script src="03-Variable_Labeling_files/libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>

  <link href="03-Variable_Labeling_files/libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">

  <script src="03-Variable_Labeling_files/libs/pagedtable-1.1/js/pagedtable.js"></script>

</head>
<body>

<div class="includes-before">
</div>

<div class="meta">
  <h1>Variable Labeling with LLMs</h1>

  <p class="subtitle">Generate Clean Variable Labels from Descriptions</p>

  <p class="author">Matthias Kloft</p>

  <p class="date">2025-11-23</p>


</div>

<main>
<section id="overview" class="level2">
<h2>Overview</h2>
<p>The <code>label_variables()</code> function uses Large Language Models to generate short, descriptive labels from variable descriptions. This is especially useful for:</p>
<ul>
<li><strong>Psychometric data</strong> with cryptic item codes (e.g., <code>A1</code>, <code>C2</code>, <code>E3</code>)</li>
<li><strong>Survey data</strong> with generic names (e.g., <code>q1</code>, <code>q2</code>, <code>item_01</code>)</li>
<li><strong>Any dataset</strong> where variable names need to be more descriptive</li>
</ul>
<p>The function works in <strong>two phases</strong>:</p>
<ol type="1">
<li><strong>Semantic Generation</strong>: LLM creates meaningful labels from descriptions</li>
<li><strong>Format Processing</strong>: Apply transformations (case, separators, abbreviations, etc.)</li>
</ol>
<p>This separation allows you to <strong>reformat labels without calling the LLM again</strong>, saving time and API costs.</p>
</section>
<section id="setup" class="level2">
<h2>Setup</h2>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"psychinterpreter"</span>,  <span class="co"># This package</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"psych"</span>,             <span class="co"># For BFI data</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"DT"</span>                 <span class="co"># For nice tables</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</details>
</div>
</section>
<section id="example-data-big-five-inventory" class="level2">
<h2>Example Data: Big Five Inventory</h2>
<p>The BFI dataset contains 25 personality items with cryptic codes like <code>A1</code>, <code>C2</code>, <code>E3</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Big Five Inventory data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"bfi"</span>, <span class="at">package =</span> <span class="st">"psych"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"bfi.dictionary"</span>, <span class="at">package =</span> <span class="st">"psych"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract first 10 items as examples</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>bfi_subset <span class="ot">&lt;-</span> bfi[, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>bfi_dict <span class="ot">&lt;-</span> bfi.dictionary[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ]</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create variable_info data frame</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>variable_info <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable =</span> <span class="fu">rownames</span>(bfi_dict),</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">description =</span> <span class="fu">as.character</span>(bfi_dict<span class="sc">$</span>Item),</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the data</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(variable_info, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-1236f1423065264ba2a4" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1236f1423065264ba2a4">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["Am indifferent to the feelings of others.","Inquire about others' well-being.","Know how to comfort others.","Love children.","Make people feel at ease.","Am exacting in my work.","Continue until everything is perfect.","Do things according to a plan.","Do things in a half-way manner.","Waste my time."]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>description<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"description","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>These cryptic codes (<code>A1</code>, <code>A2</code>, etc.) are not very readable. Let’s generate descriptive labels!</p>
</section>
<section id="basic-labeling" class="level2">
<h2>Basic Labeling</h2>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set provider and model</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>provider <span class="ot">&lt;-</span> <span class="st">"anthropic"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>llm <span class="ot">&lt;-</span> ellmer<span class="sc">::</span><span class="fu">models_anthropic</span>()[<span class="dv">1</span>, <span class="st">"id"</span>]</span></code></pre></div>
</details>
</div>
<section id="short-labels-1-3-words" class="level3">
<h3>Short Labels (1-3 words)</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>labels_short <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable_info =</span> variable_info,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_provider =</span> provider,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_model =</span> llm,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">label_type =</span> <span class="st">"short"</span>,  <span class="co"># 1-3 words</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"title"</span>         <span class="co"># Title Case</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>labels_short<span class="sc">$</span>labels_formatted <span class="sc">|&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-81d17d6c6da24a5f434e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-81d17d6c6da24a5f434e">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["Indifferent To Others","Ask About Well-Being","Comfort Others","Love Children","Put Others At Ease","Exacting Work Standards","Pursue Perfection","Plan-Oriented","Half-Way Effort","Waste Time"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>label<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"label","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="phrase-labels-4-7-words" class="level3">
<h3>Phrase Labels (4-7 words)</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>labels_phrase <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable_info =</span> variable_info,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_provider =</span> provider,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_model =</span> llm,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">label_type =</span> <span class="st">"phrase"</span>,  <span class="co"># 4-7 words</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"sentence"</span>       <span class="co"># Sentence case</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>labels_phrase<span class="sc">$</span>labels_formatted <span class="sc">|&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-74e2867cdcb8e6aa04ea" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-74e2867cdcb8e6aa04ea">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["Indifference to others","Tendency to ask about others","Ability to provide comfort to others","Affinity for and enjoyment of children","Skill in making others feel comfortable","Demands high standards in work quality","Pursues perfection in all tasks","Preference for planned and organized approaches","Tendency to complete tasks incompletely","Likelihood of wasting available time"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>label<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"label","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="acronym-labels-3-5-characters" class="level3">
<h3>Acronym Labels (3-5 characters)</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>labels_acronym <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable_info =</span> variable_info,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_provider =</span> provider,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_model =</span> llm,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">label_type =</span> <span class="st">"acronym"</span>,  <span class="co"># 3-5 character acronyms</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"upper"</span>           <span class="co"># UPPERCASE</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>labels_acronym<span class="sc">$</span>labels_formatted <span class="sc">|&gt;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-b116e75509e9c5a8e8dc" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b116e75509e9c5a8e8dc">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["INDF","INQR","CMFT","CHLD","EASE","EXCT","PERF","PLAN","HALF","WAST"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>label<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"label","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="custom-wordcharacter-limits-llm-guided" class="level3">
<h3>Custom Word/Character Limits (LLM-Guided)</h3>
<p>When you specify <code>max_words</code> or <code>max_chars</code> in <code>label_variables()</code>, they <strong>influence the LLM prompt</strong> to generate labels within those constraints. This is more effective than post-processing truncation:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tell the LLM to generate exactly 2-word labels</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>labels_two_words <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable_info =</span> variable_info,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_provider =</span> provider,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_model =</span> llm,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">label_type =</span> <span class="st">"custom"</span>,  <span class="co"># custom allows max_words to override</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_words =</span> <span class="dv">2</span>,          <span class="co"># LLM will aim for exactly 2 words</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"title"</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>labels_two_words<span class="sc">$</span>labels_formatted <span class="sc">|&gt;</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-92c90e8dc363ef959611" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-92c90e8dc363ef959611">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["Emotional Indifference","Wellbeing Inquiry","Comfort Skills","Children Affinity","Ease Creation","Work Precision","Perfection Pursuit","Plan Adherence","Half-Way Completion","Time Wastage"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>label<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"label","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tell the LLM to generate labels under 12 characters</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>labels_short_chars <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable_info =</span> variable_info,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_provider =</span> provider,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_model =</span> llm,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">label_type =</span> <span class="st">"custom"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_chars =</span> <span class="dv">12</span>,         <span class="co"># LLM will aim for ≤12 characters</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"snake"</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>labels_short_chars<span class="sc">$</span>labels_formatted <span class="sc">|&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-e7aea2a1d5cc72c619d2" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e7aea2a1d5cc72c619d2">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["indifference","concern_for_","ability_to_c","affection_fo","ability_to_p","work_exactin","pursuit_of_p","planning_and","half-way_tas","time_wastage"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>label<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"label","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Key difference:</strong> - <code>max_words</code>/<code>max_chars</code> in <code>label_variables()</code>: Guides LLM to generate appropriate labels - <code>max_words</code>/<code>max_chars</code> in <code>reformat_labels()</code>: Truncates existing labels (less intelligent)</p>
</section>
</section>
<section id="case-transformations" class="level2">
<h2>Case Transformations</h2>
<p>The same semantic labels can be formatted in different styles without re-calling the LLM:</p>
<section id="snake-case-for-r-variable-names" class="level3">
<h3>Snake Case (for R variable names)</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>labels_snake <span class="ot">&lt;-</span> <span class="fu">reformat_labels</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  labels_short,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"snake"</span>  <span class="co"># Automatically sets sep = "_" and lowercase</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>labels_snake<span class="sc">$</span>labels_formatted <span class="sc">|&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-d3c37ab7c6fb1da9fc10" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d3c37ab7c6fb1da9fc10">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["indifferent_to_others","ask_about_well-being","comfort_others","love_children","put_others_at_ease","exacting_work_standards","pursue_perfection","plan-oriented","half-way_effort","waste_time"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>label<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"label","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="camel-case-for-programming" class="level3">
<h3>Camel Case (for programming)</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>labels_camel <span class="ot">&lt;-</span> <span class="fu">reformat_labels</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  labels_short,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"camel"</span>  <span class="co"># firstWordLowerRestTitle</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>labels_camel<span class="sc">$</span>labels_formatted <span class="sc">|&gt;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-34d03f60d50f76584909" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-34d03f60d50f76584909">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["indifferentToOthers","askAboutWell-being","comfortOthers","loveChildren","putOthersAtEase","exactingWorkStandards","pursuePerfection","plan-oriented","half-wayEffort","wasteTime"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>label<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"label","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="constant-case-for-constants" class="level3">
<h3>Constant Case (for constants)</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>labels_constant <span class="ot">&lt;-</span> <span class="fu">reformat_labels</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  labels_short,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"constant"</span>  <span class="co"># UPPER_CASE_WITH_UNDERSCORES</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>labels_constant<span class="sc">$</span>labels_formatted <span class="sc">|&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-feee1a8afd9ee263613f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-feee1a8afd9ee263613f">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["INDIFFERENT_TO_OTHERS","ASK_ABOUT_WELL-BEING","COMFORT_OTHERS","LOVE_CHILDREN","PUT_OTHERS_AT_EASE","EXACTING_WORK_STANDARDS","PURSUE_PERFECTION","PLAN-ORIENTED","HALF-WAY_EFFORT","WASTE_TIME"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>label<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"label","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="custom-separator" class="level3">
<h3>Custom Separator</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>labels_custom_sep <span class="ot">&lt;-</span> <span class="fu">reformat_labels</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  labels_short,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">"-"</span>,      <span class="co"># Use hyphens</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"lower"</span>  <span class="co"># all lowercase</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>labels_custom_sep<span class="sc">$</span>labels_formatted <span class="sc">|&gt;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-dce45bdf2bde011922a0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-dce45bdf2bde011922a0">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["indifferent-to-others","ask-about-well-being","comfort-others","love-children","put-others-at-ease","exacting-work-standards","pursue-perfection","plan-oriented","half-way-effort","waste-time"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>label<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"label","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="post-processing-options" class="level2">
<h2>Post-Processing Options</h2>
<section id="remove-articles-and-prepositions" class="level3">
<h3>Remove Articles and Prepositions</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>labels_simplified <span class="ot">&lt;-</span> <span class="fu">reformat_labels</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  labels_phrase,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_articles =</span> <span class="cn">TRUE</span>,       <span class="co"># Remove: a, an, the</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_prepositions =</span> <span class="cn">TRUE</span>,   <span class="co"># Remove: of, in, at, etc.</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"snake"</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare original phrase vs simplified</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>comparison <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>variable,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">original =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>label,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">simplified =</span> labels_simplified<span class="sc">$</span>labels_formatted<span class="sc">$</span>label</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(comparison, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-5cd33d98edfe06ae3485" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5cd33d98edfe06ae3485">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["Indifference to others","Tendency to ask about others","Ability to provide comfort to others","Affinity for and enjoyment of children","Skill in making others feel comfortable","Demands high standards in work quality","Pursues perfection in all tasks","Preference for planned and organized approaches","Tendency to complete tasks incompletely","Likelihood of wasting available time"],["indifference_others","tendency_ask_others","ability_provide_comfort_others","affinity_and_enjoyment_children","skill_making_others_feel_comfortable","demands_high_standards_work_quality","pursues_perfection_all_tasks","preference_planned_and_organized_approaches","tendency_complete_tasks_incompletely","likelihood_wasting_available_time"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>original<\/th>\n      <th>simplified<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"original","targets":1},{"name":"simplified","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="abbreviate-long-words" class="level3">
<h3>Abbreviate Long Words</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>labels_abbreviated <span class="ot">&lt;-</span> <span class="fu">reformat_labels</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  labels_phrase,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">abbreviate =</span> <span class="cn">TRUE</span>,  <span class="co"># Apply rule-based abbreviation</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"snake"</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>comparison_abbrev <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>variable,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">original =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>label,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">abbreviated =</span> labels_abbreviated<span class="sc">$</span>labels_formatted<span class="sc">$</span>label</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(comparison_abbrev, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f391089da91780c58c97" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f391089da91780c58c97">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["Indifference to others","Tendency to ask about others","Ability to provide comfort to others","Affinity for and enjoyment of children","Skill in making others feel comfortable","Demands high standards in work quality","Pursues perfection in all tasks","Preference for planned and organized approaches","Tendency to complete tasks incompletely","Likelihood of wasting available time"],["indi_to_others","tend_to_ask_about_others","ability_to_provide_comfort_to_others","affi_for_and_enjo_of_chil","skill_in_making_others_feel_comf","demands_high_stan_in_work_quality","pursues_perf_in_all_tasks","pref_for_planned_and_orga_appr","tend_to_comp_tasks_inco","like_of_wasting_avai_time"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>original<\/th>\n      <th>abbreviated<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"original","targets":1},{"name":"abbreviated","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="maximum-character-limit-post-processing" class="level3">
<h3>Maximum Character Limit (Post-Processing)</h3>
<p><strong>Note:</strong> When possible, prefer using <code>max_chars</code> in <code>label_variables()</code> (shown above) to guide the LLM. This post-processing approach simply truncates existing labels:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>labels_short_max <span class="ot">&lt;-</span> <span class="fu">reformat_labels</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  labels_phrase,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_chars =</span> <span class="dv">15</span>,  <span class="co"># Truncate to 15 characters (simple truncation)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"snake"</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>comparison_max <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>variable,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">original =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>label,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">truncated =</span> labels_short_max<span class="sc">$</span>labels_formatted<span class="sc">$</span>label</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(comparison_max, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-39573d49cb253b5ef5b5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-39573d49cb253b5ef5b5">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["Indifference to others","Tendency to ask about others","Ability to provide comfort to others","Affinity for and enjoyment of children","Skill in making others feel comfortable","Demands high standards in work quality","Pursues perfection in all tasks","Preference for planned and organized approaches","Tendency to complete tasks incompletely","Likelihood of wasting available time"],["indifference_to","tendency_to_ask","ability_to_prov","affinity_for_an","skill_in_making","demands_high_st","pursues_perfect","preference_for_","tendency_to_com","likelihood_of_w"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>original<\/th>\n      <th>truncated<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"original","targets":1},{"name":"truncated","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="maximum-word-count-post-processing" class="level3">
<h3>Maximum Word Count (Post-Processing)</h3>
<p><strong>Note:</strong> When possible, prefer using <code>max_words</code> in <code>label_variables()</code> (shown above) to guide the LLM. This post-processing approach simply truncates existing labels:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>labels_limited_words <span class="ot">&lt;-</span> <span class="fu">reformat_labels</span>(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  labels_phrase,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_words =</span> <span class="dv">2</span>,   <span class="co"># Keep only first 2 words (simple truncation)</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"title"</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>comparison_words <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>variable,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">original =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>label,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">limited =</span> labels_limited_words<span class="sc">$</span>labels_formatted<span class="sc">$</span>label</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(comparison_words, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-6ee430446bfaaea5331f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6ee430446bfaaea5331f">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["Indifference to others","Tendency to ask about others","Ability to provide comfort to others","Affinity for and enjoyment of children","Skill in making others feel comfortable","Demands high standards in work quality","Pursues perfection in all tasks","Preference for planned and organized approaches","Tendency to complete tasks incompletely","Likelihood of wasting available time"],["Indifference To","Tendency To","Ability To","Affinity For","Skill In","Demands High","Pursues Perfection","Preference For","Tendency To","Likelihood Of"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>original<\/th>\n      <th>limited<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"original","targets":1},{"name":"limited","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="combining-multiple-transformations" class="level2">
<h2>Combining Multiple Transformations</h2>
<p>You can combine multiple post-processing options for maximum control:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>labels_kitchen_sink <span class="ot">&lt;-</span> <span class="fu">reformat_labels</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  labels_phrase,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_articles =</span> <span class="cn">TRUE</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_prepositions =</span> <span class="cn">TRUE</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_words =</span> <span class="dv">3</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">abbreviate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_chars =</span> <span class="dv">20</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"snake"</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>comparison_combined <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">variable =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>variable,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">original =</span> labels_phrase<span class="sc">$</span>labels_formatted<span class="sc">$</span>label,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">processed =</span> labels_kitchen_sink<span class="sc">$</span>labels_formatted<span class="sc">$</span>label</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(comparison_combined, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">pageLength =</span> <span class="dv">10</span>), <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-6f2bc6b6f3494be54ce2" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6f2bc6b6f3494be54ce2">{"x":{"filter":"none","vertical":false,"data":[["A1","A2","A3","A4","A5","C1","C2","C3","C4","C5"],["Indifference to others","Tendency to ask about others","Ability to provide comfort to others","Affinity for and enjoyment of children","Skill in making others feel comfortable","Demands high standards in work quality","Pursues perfection in all tasks","Preference for planned and organized approaches","Tendency to complete tasks incompletely","Likelihood of wasting available time"],["indi_others","tend_ask_others","ability_provide_comf","affi_and_enjo","skill_making_others","demands_high_stan","pursues_perf_all","pref_planned_and","tend_comp_tasks","like_wasting_avai"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>original<\/th>\n      <th>processed<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":10,"columnDefs":[{"name":"variable","targets":0},{"name":"original","targets":1},{"name":"processed","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="export-labels" class="level2">
<h2>Export Labels</h2>
<p>Save your labels for use in other tools:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Export to CSV (comma-separated, most common)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">export_labels</span>(labels_snake, <span class="st">"bfi_labels.csv"</span>, <span class="at">format =</span> <span class="st">"csv"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Export to CSV2 (semicolon-separated, common in Europe)</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">export_labels</span>(labels_snake, <span class="st">"bfi_labels.csv"</span>, <span class="at">format =</span> <span class="st">"csv2"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Export to TXT (tab-separated)</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="fu">export_labels</span>(labels_snake, <span class="st">"bfi_labels.txt"</span>, <span class="at">format =</span> <span class="st">"txt"</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Export to Excel</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="fu">export_labels</span>(labels_snake, <span class="st">"bfi_labels.xlsx"</span>, <span class="at">format =</span> <span class="st">"xlsx"</span>)</span></code></pre></div>
</details>
</div>
<p>All formats create a table with <code>variable</code> and <code>label</code> columns that can be imported into other software.</p>
</section>
<section id="using-labels-in-analysis" class="level2">
<h2>Using Labels in Analysis</h2>
<p>Apply the generated labels to your data:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract labels as named vector</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>label_vector <span class="ot">&lt;-</span> <span class="fu">setNames</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  labels_snake<span class="sc">$</span>labels_formatted<span class="sc">$</span>label,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  labels_snake<span class="sc">$</span>labels_formatted<span class="sc">$</span>variable</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply to column names</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(bfi_subset) <span class="ot">&lt;-</span> label_vector[<span class="fu">colnames</span>(bfi_subset)]</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Show result</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bfi_subset, <span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-ca62cc128009ba6a517f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ca62cc128009ba6a517f">{"x":{"filter":"none","vertical":false,"data":[["61617","61618","61620","61621","61622"],[2,2,5,4,2],[4,4,4,4,3],[3,5,5,6,3],[4,2,4,5,4],[4,5,4,5,5],[2,5,4,4,4],[3,4,5,4,4],[3,4,4,3,5],[4,3,2,5,3],[4,4,5,5,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>indifferent_to_others<\/th>\n      <th>ask_about_well-being<\/th>\n      <th>comfort_others<\/th>\n      <th>love_children<\/th>\n      <th>put_others_at_ease<\/th>\n      <th>exacting_work_standards<\/th>\n      <th>pursue_perfection<\/th>\n      <th>plan-oriented<\/th>\n      <th>half-way_effort<\/th>\n      <th>waste_time<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"indifferent_to_others","targets":1},{"name":"ask_about_well-being","targets":2},{"name":"comfort_others","targets":3},{"name":"love_children","targets":4},{"name":"put_others_at_ease","targets":5},{"name":"exacting_work_standards","targets":6},{"name":"pursue_perfection","targets":7},{"name":"plan-oriented","targets":8},{"name":"half-way_effort","targets":9},{"name":"waste_time","targets":10}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Now your data has readable variable names!</p>
</section>
<section id="configuration-objects" class="level2">
<h2>Configuration Objects</h2>
<p>For repeated labeling tasks, use configuration objects:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define your preferred formatting style</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>my_label_config <span class="ot">&lt;-</span> <span class="fu">labeling_args</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">label_type =</span> <span class="st">"short"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"snake"</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_articles =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_words =</span> <span class="dv">3</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Use across multiple datasets</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>labels_1 <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  dataset1_info,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">labeling_args =</span> my_label_config,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_provider =</span> provider,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_model =</span> llm</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>labels_2 <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  dataset2_info,</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">labeling_args =</span> my_label_config,</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_provider =</span> provider,</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_model =</span> llm</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Direct parameters override config</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>labels_3 <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  dataset3_info,</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">labeling_args =</span> my_label_config,</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">case =</span> <span class="st">"camel"</span>,  <span class="co"># Override the snake_case from config</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_provider =</span> provider,</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_model =</span> llm</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</details>
</div>
</section>
<section id="reusing-chat-sessions" class="level2">
<h2>Reusing Chat Sessions</h2>
<p>For efficiency when labeling multiple datasets:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create persistent chat session</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>chat <span class="ot">&lt;-</span> <span class="fu">chat_session</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">analysis_type =</span> <span class="st">"label"</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_provider =</span> provider,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">llm_model =</span> llm</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Reuse session for multiple labeling calls</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>labels_1 <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(dataset1_info, <span class="at">chat_session =</span> chat)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>labels_2 <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(dataset2_info, <span class="at">chat_session =</span> chat)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>labels_3 <span class="ot">&lt;-</span> <span class="fu">label_variables</span>(dataset3_info, <span class="at">chat_session =</span> chat)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Check total token usage</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total tokens used:"</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    chat<span class="sc">$</span>total_input_tokens <span class="sc">+</span> chat<span class="sc">$</span>total_output_tokens, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="summary" class="level2">
<h2>Summary</h2>
<p>The <code>label_variables()</code> function provides:</p>
<ul>
<li><strong>Semantic understanding</strong>: LLMs generate meaningful labels from descriptions</li>
<li><strong>Flexible formatting</strong>: Multiple case styles, separators, and transformations</li>
<li><strong>Efficient workflow</strong>: Reformat without re-calling the LLM</li>
<li><strong>Multiple export options</strong>: CSV, JSON, R scripts</li>
<li><strong>Configuration reuse</strong>: Define once, apply many times</li>
</ul>
<p><strong>Key parameters:</strong></p>
<table class="caption-top">
<colgroup>
<col style="width: 26%">
<col style="width: 21%">
<col style="width: 30%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Options</th>
<th>LLM-Guided?</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>label_type</code></td>
<td><code>"short"</code>, <code>"phrase"</code>, <code>"acronym"</code>, <code>"custom"</code></td>
<td>✓ Yes</td>
<td>Control label length via prompt</td>
</tr>
<tr class="even">
<td><code>max_words</code></td>
<td>Integer</td>
<td>✓ Yes (in <code>label_variables()</code>)</td>
<td>Tell LLM exact word count to generate</td>
</tr>
<tr class="odd">
<td><code>max_chars</code></td>
<td>Integer</td>
<td>✓ Yes (in <code>label_variables()</code>)</td>
<td>Tell LLM max character length</td>
</tr>
<tr class="even">
<td><code>style_hint</code></td>
<td>Character</td>
<td>✓ Yes</td>
<td>Provide style guidance to LLM</td>
</tr>
<tr class="odd">
<td><code>case</code></td>
<td><code>"snake"</code>, <code>"camel"</code>, <code>"title"</code>, <code>"upper"</code>, etc.</td>
<td>Post-process</td>
<td>Case transformation</td>
</tr>
<tr class="even">
<td><code>sep</code></td>
<td><code>" "</code>, <code>"_"</code>, <code>"-"</code>, <code>""</code></td>
<td>Post-process</td>
<td>Word separator</td>
</tr>
<tr class="odd">
<td><code>remove_articles</code></td>
<td><code>TRUE</code>/<code>FALSE</code></td>
<td>Post-process</td>
<td>Remove a, an, the</td>
</tr>
<tr class="even">
<td><code>remove_prepositions</code></td>
<td><code>TRUE</code>/<code>FALSE</code></td>
<td>Post-process</td>
<td>Remove of, in, at, etc.</td>
</tr>
<tr class="odd">
<td><code>abbreviate</code></td>
<td><code>TRUE</code>/<code>FALSE</code></td>
<td>Post-process</td>
<td>Apply abbreviation rules</td>
</tr>
</tbody>
</table>
<p><strong>Important:</strong> Parameters marked “LLM-Guided” influence what the model generates when used in <code>label_variables()</code>. All parameters can also be used in <code>reformat_labels()</code> for post-processing without calling the LLM again.</p>
</section>
<section id="session-info" class="level2">
<h2>Session Info</h2>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pander</span>(<span class="fu">sessionInfo</span>())</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><strong>R version 4.5.2 (2025-10-31 ucrt)</strong></p>
<p><strong>Platform:</strong> x86_64-w64-mingw32/x64</p>
<p><strong>locale:</strong> <em>LC_COLLATE=German_Germany.utf8</em>, <em>LC_CTYPE=German_Germany.utf8</em>, <em>LC_MONETARY=German_Germany.utf8</em>, <em>LC_NUMERIC=C</em> and <em>LC_TIME=German_Germany.utf8</em></p>
<p><strong>attached base packages:</strong> <em>stats</em>, <em>graphics</em>, <em>grDevices</em>, <em>utils</em>, <em>datasets</em>, <em>methods</em> and <em>base</em></p>
<p><strong>other attached packages:</strong> <em>DT(v.0.34.0)</em>, <em>psych(v.2.5.6)</em>, <em>psychinterpreter(v.0.0.0.9000)</em> and <em>pacman(v.0.5.1)</em></p>
<p><strong>loaded via a namespace (and not attached):</strong> <em>rappdirs(v.0.3.3)</em>, <em>sass(v.0.4.10)</em>, <em>generics(v.0.1.4)</em>, <em>tidyr(v.1.3.1)</em>, <em>lattice(v.0.22-7)</em>, <em>digest(v.0.6.37)</em>, <em>magrittr(v.2.0.3)</em>, <em>evaluate(v.1.0.5)</em>, <em>grid(v.4.5.2)</em>, <em>RColorBrewer(v.1.1-3)</em>, <em>fastmap(v.1.2.0)</em>, <em>jsonlite(v.2.0.0)</em>, <em>purrr(v.1.0.4)</em>, <em>pander(v.0.6.6)</em>, <em>crosstalk(v.1.2.2)</em>, <em>scales(v.1.4.0)</em>, <em>coro(v.1.1.0)</em>, <em>httr2(v.1.2.1)</em>, <em>jquerylib(v.0.1.4)</em>, <em>mnormt(v.2.1.1)</em>, <em>cli(v.3.6.5)</em>, <em>rlang(v.1.1.6)</em>, <em>withr(v.3.0.2)</em>, <em>cachem(v.1.1.0)</em>, <em>yaml(v.2.3.10)</em>, <em>tools(v.4.5.2)</em>, <em>parallel(v.4.5.2)</em>, <em>dplyr(v.1.1.4)</em>, <em>ggplot2(v.4.0.1)</em>, <em>curl(v.7.0.0)</em>, <em>vctrs(v.0.6.5)</em>, <em>R6(v.2.6.1)</em>, <em>lifecycle(v.1.0.4)</em>, <em>htmlwidgets(v.1.6.4)</em>, <em>pkgconfig(v.2.0.3)</em>, <em>pillar(v.1.11.1)</em>, <em>bslib(v.0.9.0)</em>, <em>gtable(v.0.3.6)</em>, <em>glue(v.1.8.0)</em>, <em>Rcpp(v.1.1.0)</em>, <em>xfun(v.0.53)</em>, <em>tibble(v.3.3.0)</em>, <em>tidyselect(v.1.2.1)</em>, <em>rstudioapi(v.0.17.1)</em>, <em>knitr(v.1.50)</em>, <em>farver(v.2.1.2)</em>, <em>htmltools(v.0.5.8.1)</em>, <em>nlme(v.3.1-168)</em>, <em>rmarkdown(v.2.30)</em>, <em>ellmer(v.0.4.0)</em>, <em>compiler(v.4.5.2)</em> and <em>S7(v.0.2.0)</em></p>
</div>
</div>
</section>
</main>

<div class="includes-after">
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div>



</body></html>